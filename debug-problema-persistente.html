<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Problema Persistente</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .debug-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .log-area {
            background: #000;
            color: #0f0;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            border-radius: 5px;
            height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin: 10px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .btn-danger { background: #dc3545; }
        .btn-success { background: #28a745; }
        .btn-warning { background: #ffc107; color: #000; }
        input[type="text"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px;
            width: 200px;
        }
        .section-title {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 10px 0;
        }
        .data-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
        }
        .field-name {
            font-weight: bold;
            color: #007bff;
        }
        .field-value {
            margin-left: 10px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug Problema Persistente - Investiga√ß√£o Profunda</h1>
        
        <div class="debug-section">
            <h3 class="section-title">üö® VERIFICA√á√ÉO CR√çTICA</h3>
            <button onclick="verificacaoCompleta()" class="btn-success">VERIFICA√á√ÉO COMPLETA</button>
            <button onclick="debugCartelaEspecifica()" class="btn-warning">Debug Cartela Espec√≠fica</button>
            <button onclick="testarGravacaoImediata()" class="btn-danger">Testar Grava√ß√£o AGORA</button>
        </div>

        <div class="debug-section">
            <h3 class="section-title">üìä Investiga√ß√£o Dados Reais</h3>
            <button onclick="listarTodosDocumentos()">Listar TODOS os Documentos</button>
            <button onclick="analisarEstruturaCampos()">Analisar Estrutura de Campos</button>
            <button onclick="verificarColecoesExistentes()">Verificar Cole√ß√µes Existentes</button>
            <button onclick="debugRegrasFirestore()">Debug Regras Firestore</button>
        </div>

        <div class="debug-section">
            <h3 class="section-title">üîß Teste de Telefone Espec√≠fico</h3>
            <input type="text" id="telefoneDebug" placeholder="Telefone para debug" value="85966666666">
            <button onclick="debugTelefoneCompleto()">Debug Telefone Completo</button>
            <button onclick="buscarTelefoneRaw()">Busca RAW no Firebase</button>
            <button onclick="criarCartelaParaTelefone()">Criar Cartela para Este Telefone</button>
        </div>

        <div class="debug-section">
            <h3 class="section-title">üìã Log de Debug</h3>
            <div id="logArea" class="log-area"></div>
            <button onclick="limparLog()">Limpar Log</button>
            <button onclick="exportarLog()">Exportar Log</button>
        </div>

        <div class="debug-section">
            <h3 class="section-title">üìä Dados Encontrados</h3>
            <div id="dadosEncontrados" class="data-grid"></div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>

    <script>
        let logBuffer = [];

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logArea = document.getElementById('logArea');
            const colors = {
                'error': '#ff6b6b',
                'success': '#51cf66',
                'warning': '#ffd43b',
                'info': '#74c0fc',
                'critical': '#ff0080'
            };
            
            const logEntry = `[${timestamp}] ${message}`;
            logBuffer.push(logEntry);
            
            logArea.innerHTML += `<span style="color: ${colors[type]}">${logEntry}</span>\n`;
            logArea.scrollTop = logArea.scrollHeight;
            
            // Tamb√©m logar no console para debug
            console.log(`[DEBUG] ${logEntry}`);
        }

        function exibirCartela(titulo, cartela, index) {
            const container = document.getElementById('dadosEncontrados');
            const card = document.createElement('div');
            card.className = 'data-card';
            
            let campos = '';
            if (cartela && typeof cartela === 'object') {
                Object.entries(cartela).forEach(([key, value]) => {
                    let valorExibido = value;
                    if (value && typeof value === 'object') {
                        valorExibido = JSON.stringify(value);
                    }
                    if (typeof value === 'string' && value.length > 50) {
                        valorExibido = value.substring(0, 50) + '...';
                    }
                    
                    campos += `
                        <div>
                            <span class="field-name">${key}:</span>
                            <span class="field-value">${valorExibido}</span>
                        </div>
                    `;
                });
            }
            
            card.innerHTML = `
                <h4>${titulo} ${index !== undefined ? `#${index + 1}` : ''}</h4>
                ${campos}
            `;
            
            container.appendChild(card);
        }

        async function verificacaoCompleta() {
            log('üö® INICIANDO VERIFICA√á√ÉO CR√çTICA COMPLETA...', 'critical');
            
            try {
                // 1. Verificar conex√£o Firebase
                log('1Ô∏è‚É£ Verificando conex√£o Firebase...', 'info');
                const db = firebase.firestore();
                
                // 2. Verificar se cole√ß√£o cartelas existe
                log('2Ô∏è‚É£ Verificando cole√ß√£o cartelas...', 'info');
                const colecaoTest = await db.collection('cartelas').limit(1).get();
                log(`   Cole√ß√£o existe: ${!colecaoTest.empty}`, colecaoTest.empty ? 'error' : 'success');
                
                // 3. Contar total de documentos
                log('3Ô∏è‚É£ Contando documentos...', 'info');
                const totalDocs = await db.collection('cartelas').get();
                log(`   Total de documentos: ${totalDocs.size}`, 'info');
                
                // 4. Verificar documentos com telefone
                log('4Ô∏è‚É£ Verificando documentos com telefone...', 'info');
                let docsComTelefone = 0;
                let telefonesCadastrados = new Set();
                
                totalDocs.forEach(doc => {
                    const data = doc.data();
                    if (data.telefone) {
                        docsComTelefone++;
                        telefonesCadastrados.add(data.telefone);
                    }
                });
                
                log(`   Docs com telefone: ${docsComTelefone}`, 'info');
                log(`   Telefones √∫nicos: ${telefonesCadastrados.size}`, 'info');
                
                // 5. Verificar telefone espec√≠fico
                log('5Ô∏è‚É£ Verificando telefone 85966666666...', 'info');
                const telefoneEspecifico = '85966666666';
                
                // Busca exata
                const buscaExata = await db.collection('cartelas')
                    .where('telefone', '==', telefoneEspecifico)
                    .get();
                
                log(`   Busca exata: ${buscaExata.size} resultados`, buscaExata.size > 0 ? 'success' : 'warning');
                
                // 6. Listar todos os telefones cadastrados
                log('6Ô∏è‚É£ Telefones cadastrados no sistema:', 'info');
                telefonesCadastrados.forEach(tel => {
                    log(`   üìû ${tel}`, 'info');
                });
                
                // 7. Verificar estrutura dos documentos
                log('7Ô∏è‚É£ Verificando estrutura dos primeiros 5 documentos...', 'info');
                const amostra = await db.collection('cartelas').limit(5).get();
                amostra.forEach((doc, index) => {
                    const data = doc.data();
                    log(`   Doc ${index + 1} (${doc.id}):`, 'info');
                    log(`     Campos: ${Object.keys(data).join(', ')}`, 'info');
                    if (data.telefone) {
                        log(`     Telefone: "${data.telefone}" (tipo: ${typeof data.telefone})`, 'info');
                    }
                    
                    exibirCartela(`Documento Amostra`, data, index);
                });
                
                log('‚úÖ VERIFICA√á√ÉO COMPLETA FINALIZADA', 'success');
                
            } catch (error) {
                log(`‚ùå ERRO CR√çTICO na verifica√ß√£o: ${error.message}`, 'error');
                log(`   Stack: ${error.stack}`, 'error');
            }
        }

        async function debugCartelaEspecifica() {
            const telefone = document.getElementById('telefoneDebug').value;
            log(`üîç DEBUG ESPEC√çFICO PARA TELEFONE: ${telefone}`, 'critical');
            
            try {
                const db = firebase.firestore();
                
                // 1. Normalizar telefone
                const telefoneNormalizado = telefone.replace(/\D/g, '');
                log(`üì± Telefone normalizado: "${telefoneNormalizado}"`, 'info');
                
                // 2. Buscar com diferentes varia√ß√µes
                const variacoes = [
                    telefone,
                    telefoneNormalizado,
                    `+55${telefoneNormalizado}`,
                    `0${telefoneNormalizado}`,
                    telefoneNormalizado.substring(2),
                    telefoneNormalizado.substring(1)
                ];
                
                log(`üîç Testando ${variacoes.length} varia√ß√µes:`, 'info');
                
                for (const variacao of variacoes) {
                    if (variacao && variacao.length >= 8) {
                        const snapshot = await db.collection('cartelas')
                            .where('telefone', '==', variacao)
                            .get();
                        
                        log(`   "${variacao}": ${snapshot.size} resultados`, 
                            snapshot.size > 0 ? 'success' : 'warning');
                        
                        if (snapshot.size > 0) {
                            snapshot.forEach((doc, index) => {
                                const data = doc.data();
                                log(`     üìÑ Resultado ${index + 1}: ${doc.id}`, 'success');
                                exibirCartela(`Resultado para ${variacao}`, data, index);
                            });
                        }
                    }
                }
                
                // 3. Busca por conte√∫do
                log('üîç Busca por conte√∫do...', 'info');
                const todasCartelas = await db.collection('cartelas').get();
                let encontrados = 0;
                
                todasCartelas.forEach(doc => {
                    const data = doc.data();
                    const telefoneDoc = data.telefone ? data.telefone.toString() : '';
                    
                    if (telefoneDoc.includes(telefoneNormalizado) || 
                        telefoneNormalizado.includes(telefoneDoc)) {
                        encontrados++;
                        log(`     üìÑ Match por conte√∫do: ${doc.id} (tel: ${telefoneDoc})`, 'success');
                        exibirCartela(`Match por Conte√∫do`, data);
                    }
                });
                
                log(`üìä Total encontrados por conte√∫do: ${encontrados}`, 'info');
                
            } catch (error) {
                log(`‚ùå Erro no debug espec√≠fico: ${error.message}`, 'error');
            }
        }

        async function testarGravacaoImediata() {
            log('üíæ TESTANDO GRAVA√á√ÉO IMEDIATA...', 'critical');
            
            try {
                const db = firebase.firestore();
                const telefoneTest = '85966666666';
                const nomeTest = `Teste Imediato ${Date.now()}`;
                
                // 1. Criar cartela de teste
                const cartelaTeste = {
                    id: `teste_imediato_${Date.now()}`,
                    numeroCartela: Math.floor(Math.random() * 9999) + 1,
                    numeros: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                    preco: 1.00,
                    vendida: true,
                    comprador: nomeTest,
                    telefone: telefoneTest,
                    email: null,
                    dataVenda: new Date().toISOString(),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    testeImediato: true,
                    timestampTeste: Date.now()
                };
                
                log(`üìù Gravando cartela: ${cartelaTeste.id}`, 'info');
                log(`   Comprador: ${cartelaTeste.comprador}`, 'info');
                log(`   Telefone: ${cartelaTeste.telefone}`, 'info');
                
                // 2. Salvar no Firebase
                await db.collection('cartelas').doc(cartelaTeste.id).set(cartelaTeste);
                log(`‚úÖ Cartela salva com sucesso!`, 'success');
                
                // 3. Aguardar propaga√ß√£o
                log(`‚è≥ Aguardando 3 segundos...`, 'info');
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // 4. Tentar buscar imediatamente
                log(`üîç Buscando cartela rec√©m-criada...`, 'info');
                
                const snapshot = await db.collection('cartelas')
                    .where('telefone', '==', telefoneTest)
                    .get();
                
                log(`üìä Resultados da busca: ${snapshot.size}`, snapshot.size > 0 ? 'success' : 'error');
                
                let cartelaEncontrada = false;
                snapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.id === cartelaTeste.id || doc.id === cartelaTeste.id) {
                        cartelaEncontrada = true;
                        log(`‚úÖ SUCESSO: Cartela encontrada ap√≥s grava√ß√£o!`, 'success');
                        exibirCartela('Cartela Rec√©m-Criada Encontrada', data);
                    }
                });
                
                if (!cartelaEncontrada) {
                    log(`‚ùå FALHA: Cartela n√£o encontrada ap√≥s grava√ß√£o!`, 'error');
                    
                    // Tentar buscar por ID diretamente
                    const docDireto = await db.collection('cartelas').doc(cartelaTeste.id).get();
                    if (docDireto.exists) {
                        log(`‚ö†Ô∏è Cartela existe no Firebase mas busca por telefone falhou!`, 'warning');
                        log(`   Dados: ${JSON.stringify(docDireto.data(), null, 2)}`, 'info');
                        exibirCartela('Cartela Existe mas Busca Falhou', docDireto.data());
                    } else {
                        log(`‚ùå Cartela n√£o foi salva no Firebase!`, 'error');
                    }
                }
                
                // 5. Limpeza
                try {
                    await db.collection('cartelas').doc(cartelaTeste.id).delete();
                    log(`üóëÔ∏è Cartela de teste removida`, 'info');
                } catch (deleteError) {
                    log(`‚ö†Ô∏è Erro ao remover cartela de teste: ${deleteError.message}`, 'warning');
                }
                
            } catch (error) {
                log(`‚ùå Erro no teste de grava√ß√£o: ${error.message}`, 'error');
                log(`   Stack: ${error.stack}`, 'error');
            }
        }

        async function listarTodosDocumentos() {
            log('üìã LISTANDO TODOS OS DOCUMENTOS...', 'info');
            
            try {
                const db = firebase.firestore();
                const snapshot = await db.collection('cartelas').get();
                
                log(`üìä Total de documentos: ${snapshot.size}`, 'info');
                
                if (snapshot.size === 0) {
                    log('‚ö†Ô∏è NENHUM DOCUMENTO ENCONTRADO NA COLE√á√ÉO!', 'warning');
                    return;
                }
                
                snapshot.forEach((doc, index) => {
                    const data = doc.data();
                    log(`üìÑ Doc ${index + 1} (ID: ${doc.id})`, 'info');
                    log(`   Comprador: ${data.comprador || data.nomeComprador || 'N/A'}`, 'info');
                    log(`   Telefone: ${data.telefone || 'N/A'}`, 'info');
                    log(`   Vendida: ${data.vendida || 'N/A'}`, 'info');
                    
                    exibirCartela(`Documento ${index + 1}`, data, index);
                });
                
            } catch (error) {
                log(`‚ùå Erro ao listar documentos: ${error.message}`, 'error');
            }
        }

        async function analisarEstruturaCampos() {
            log('üî¨ ANALISANDO ESTRUTURA DE CAMPOS...', 'info');
            
            try {
                const db = firebase.firestore();
                const snapshot = await db.collection('cartelas').get();
                
                const estruturas = new Map();
                const camposTelefone = new Set();
                const valoresTelefone = new Map();
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const campos = Object.keys(data).sort();
                    const estruturaKey = campos.join(',');
                    
                    estruturas.set(estruturaKey, (estruturas.get(estruturaKey) || 0) + 1);
                    
                    // Analisar campos de telefone
                    campos.forEach(campo => {
                        if (campo.toLowerCase().includes('telefone') || 
                            campo.toLowerCase().includes('phone') ||
                            campo.toLowerCase().includes('cel')) {
                            camposTelefone.add(campo);
                            
                            const valor = data[campo];
                            if (valor) {
                                const key = `${campo}:${valor}`;
                                valoresTelefone.set(key, (valoresTelefone.get(key) || 0) + 1);
                            }
                        }
                    });
                });
                
                log('üìä ESTRUTURAS DE CAMPOS ENCONTRADAS:', 'success');
                estruturas.forEach((count, estrutura) => {
                    log(`   ${count}x: [${estrutura.split(',').slice(0, 5).join(', ')}${estrutura.split(',').length > 5 ? '...' : ''}]`, 'info');
                });
                
                log('üìû CAMPOS DE TELEFONE ENCONTRADOS:', 'success');
                camposTelefone.forEach(campo => {
                    log(`   - ${campo}`, 'info');
                });
                
                log('üì± VALORES DE TELEFONE CADASTRADOS:', 'success');
                valoresTelefone.forEach((count, valor) => {
                    log(`   ${count}x: ${valor}`, 'info');
                });
                
            } catch (error) {
                log(`‚ùå Erro na an√°lise de estrutura: ${error.message}`, 'error');
            }
        }

        async function verificarColecoesExistentes() {
            log('üìö VERIFICANDO COLE√á√ïES EXISTENTES...', 'info');
            
            try {
                const db = firebase.firestore();
                
                // Lista de poss√≠veis nomes de cole√ß√µes
                const possiveisColecoes = [
                    'cartelas', 'cartela', 'bingo', 'rifas', 'rifa', 
                    'vendas', 'compras', 'usuarios', 'users', 'config'
                ];
                
                for (const nomeColecao of possiveisColecoes) {
                    try {
                        const snapshot = await db.collection(nomeColecao).limit(1).get();
                        if (!snapshot.empty) {
                            const count = await db.collection(nomeColecao).get();
                            log(`‚úÖ Cole√ß√£o "${nomeColecao}": ${count.size} documentos`, 'success');
                            
                            // Mostrar primeiro documento
                            const primeiro = snapshot.docs[0];
                            log(`   Exemplo: ${JSON.stringify(primeiro.data(), null, 2).substring(0, 100)}...`, 'info');
                        }
                    } catch (error) {
                        log(`‚ùå Cole√ß√£o "${nomeColecao}": n√£o existe ou erro`, 'warning');
                    }
                }
                
            } catch (error) {
                log(`‚ùå Erro ao verificar cole√ß√µes: ${error.message}`, 'error');
            }
        }

        async function debugRegrasFirestore() {
            log('üîê DEBUGANDO REGRAS FIRESTORE...', 'info');
            
            try {
                const db = firebase.firestore();
                
                // Testar diferentes opera√ß√µes
                log('1Ô∏è‚É£ Testando leitura...', 'info');
                try {
                    const readTest = await db.collection('cartelas').limit(1).get();
                    log(`   ‚úÖ Leitura: OK (${readTest.size} docs)`, 'success');
                } catch (readError) {
                    log(`   ‚ùå Leitura: FALHOU - ${readError.message}`, 'error');
                }
                
                log('2Ô∏è‚É£ Testando escrita...', 'info');
                try {
                    const testDoc = {
                        teste: true,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    };
                    const writeTest = await db.collection('cartelas').add(testDoc);
                    log(`   ‚úÖ Escrita: OK (${writeTest.id})`, 'success');
                    
                    // Limpar teste
                    await writeTest.delete();
                    log(`   üóëÔ∏è Teste removido`, 'info');
                } catch (writeError) {
                    log(`   ‚ùå Escrita: FALHOU - ${writeError.message}`, 'error');
                }
                
                log('3Ô∏è‚É£ Testando query...', 'info');
                try {
                    const queryTest = await db.collection('cartelas')
                        .where('telefone', '==', '99999999999')
                        .get();
                    log(`   ‚úÖ Query: OK (${queryTest.size} resultados)`, 'success');
                } catch (queryError) {
                    log(`   ‚ùå Query: FALHOU - ${queryError.message}`, 'error');
                }
                
            } catch (error) {
                log(`‚ùå Erro no debug de regras: ${error.message}`, 'error');
            }
        }

        async function debugTelefoneCompleto() {
            const telefone = document.getElementById('telefoneDebug').value;
            await debugCartelaEspecifica();
        }

        async function buscarTelefoneRaw() {
            const telefone = document.getElementById('telefoneDebug').value;
            log(`üîç BUSCA RAW PARA TELEFONE: ${telefone}`, 'critical');
            
            try {
                const db = firebase.firestore();
                
                // Busca completamente RAW
                const snapshot = await db.collection('cartelas').get();
                log(`üìä Total de documentos na cole√ß√£o: ${snapshot.size}`, 'info');
                
                let encontrados = 0;
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const dataStr = JSON.stringify(data).toLowerCase();
                    const telefoneStr = telefone.toLowerCase();
                    
                    if (dataStr.includes(telefoneStr)) {
                        encontrados++;
                        log(`üìÑ MATCH RAW encontrado: ${doc.id}`, 'success');
                        log(`   Dados: ${JSON.stringify(data, null, 2)}`, 'info');
                        exibirCartela(`Match RAW ${encontrados}`, data);
                    }
                });
                
                log(`üìä Total encontrados na busca RAW: ${encontrados}`, encontrados > 0 ? 'success' : 'warning');
                
            } catch (error) {
                log(`‚ùå Erro na busca RAW: ${error.message}`, 'error');
            }
        }

        async function criarCartelaParaTelefone() {
            const telefone = document.getElementById('telefoneDebug').value;
            log(`üíæ CRIANDO CARTELA PARA TELEFONE: ${telefone}`, 'critical');
            
            try {
                const db = firebase.firestore();
                
                const cartela = {
                    id: `debug_${Date.now()}`,
                    numeroCartela: 9999,
                    numeros: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                    preco: 1.00,
                    vendida: true,
                    comprador: `Debug User ${Date.now()}`,
                    telefone: telefone.replace(/\D/g, ''), // Normalizado
                    email: 'debug@test.com',
                    dataVenda: new Date().toISOString(),
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    debugTest: true
                };
                
                log(`üìù Dados da cartela:`, 'info');
                log(`   ${JSON.stringify(cartela, null, 2)}`, 'info');
                
                await db.collection('cartelas').doc(cartela.id).set(cartela);
                log(`‚úÖ Cartela criada: ${cartela.id}`, 'success');
                
                // Verificar imediatamente
                setTimeout(async () => {
                    const snapshot = await db.collection('cartelas')
                        .where('telefone', '==', cartela.telefone)
                        .get();
                    
                    log(`üîç Verifica√ß√£o imediata: ${snapshot.size} resultados`, 'info');
                    
                    snapshot.forEach(doc => {
                        if (doc.id === cartela.id) {
                            log(`‚úÖ Cartela encontrada na busca!`, 'success');
                        }
                    });
                }, 2000);
                
            } catch (error) {
                log(`‚ùå Erro ao criar cartela: ${error.message}`, 'error');
            }
        }

        function limparLog() {
            document.getElementById('logArea').innerHTML = '';
            document.getElementById('dadosEncontrados').innerHTML = '';
            logBuffer = [];
        }

        function exportarLog() {
            const logText = logBuffer.join('\n');
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `debug-log-${new Date().toISOString().slice(0, 19)}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ Sistema de debug profundo carregado!', 'success');
            log('‚ö†Ô∏è ATEN√á√ÉO: Este √© um debug cr√≠tico para resolver o problema', 'warning');
        });
    </script>
</body>
</html>
