<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚úÖ Valida√ß√£o Final - Cartelas 24 N√∫meros</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .btn { background: #28a745; color: white; border: none; padding: 15px 30px; margin: 10px; border-radius: 8px; cursor: pointer; font-size: 16px; }
        .btn:hover { background: #218838; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-danger { background: #dc3545; }
        .status { background: #e9ecef; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .cartela-display { border: 3px solid #28a745; padding: 20px; margin: 20px 0; border-radius: 15px; background: #f8fff8; }
        .grid-header { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin: 15px 0; }
        .grid-numeros { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin: 15px 0; }
        .letra { background: #dc3545; color: white; padding: 12px; text-align: center; font-weight: bold; font-size: 1.3em; border-radius: 8px; }
        .numero { background: #28a745; color: white; padding: 12px; text-align: center; font-weight: bold; font-size: 1.1em; border-radius: 8px; }
        .livre { background: #ffc107; color: #212529; padding: 12px; text-align: center; font-weight: bold; font-size: 0.9em; border-radius: 8px; }
        .resultado { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .erro { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; padding: 15px; border-radius: 8px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Valida√ß√£o Final - Sistema de Cartelas</h1>
        <p>Verifica√ß√£o completa se as cartelas est√£o sendo geradas com 24 n√∫meros √∫nicos</p>
        
        <div style="text-align: center; margin: 30px 0;">
            <button onclick="testarFuncaoJS()" class="btn">üîß Testar Fun√ß√£o JavaScript</button>
            <button onclick="testarFuncaoHTML()" class="btn">üìÑ Testar Fun√ß√£o HTML</button>
            <button onclick="testarMultiplas()" class="btn btn-warning">üìä Testar 10 Cartelas</button>
            <button onclick="limparTudo()" class="btn btn-danger">üóëÔ∏è Limpar Tudo</button>
        </div>

        <div class="status">
            <h3>üìä Estat√≠sticas de Valida√ß√£o</h3>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; text-align: center;">
                <div>
                    <h4>Cartelas Testadas</h4>
                    <div id="total-testadas" style="font-size: 2em; font-weight: bold; color: #28a745;">0</div>
                </div>
                <div>
                    <h4>24 N√∫meros ‚úÖ</h4>
                    <div id="total-corretas" style="font-size: 2em; font-weight: bold; color: #28a745;">0</div>
                </div>
                <div>
                    <h4>Problemas ‚ùå</h4>
                    <div id="total-problemas" style="font-size: 2em; font-weight: bold; color: #dc3545;">0</div>
                </div>
                <div>
                    <h4>Taxa de Sucesso</h4>
                    <div id="taxa-sucesso" style="font-size: 2em; font-weight: bold; color: #17a2b8;">0%</div>
                </div>
            </div>
        </div>

        <div id="container-cartelas">
            <!-- Cartelas aparecer√£o aqui -->
        </div>

        <div class="status">
            <h3>üìã Log de Testes</h3>
            <div id="log-testes" style="background: #343a40; color: #f8f9fa; padding: 20px; border-radius: 8px; font-family: monospace; max-height: 400px; overflow-y: auto;">
                Sistema pronto para testes...
            </div>
        </div>
    </div>

    <script>
        let estatisticas = {
            testadas: 0,
            corretas: 0,
            problemas: 0
        };

        function log(msg) {
            const logDiv = document.getElementById('log-testes');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<br>[${timestamp}] ${msg}`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[VALIDA√á√ÉO] ${msg}`);
        }

        function atualizarEstatisticas() {
            document.getElementById('total-testadas').textContent = estatisticas.testadas;
            document.getElementById('total-corretas').textContent = estatisticas.corretas;
            document.getElementById('total-problemas').textContent = estatisticas.problemas;
            
            const taxa = estatisticas.testadas > 0 ? 
                Math.round((estatisticas.corretas / estatisticas.testadas) * 100) : 0;
            document.getElementById('taxa-sucesso').textContent = taxa + '%';
        }

        function gerarCartelaJS() {
            // Fun√ß√£o id√™ntica ao cartelas.js
            const numeros = [];
            const disponiveis = [];
            
            for (let i = 1; i <= 75; i++) {
                disponiveis.push(i);
            }
            
            for (let i = 0; i < 24; i++) {
                const indice = Math.floor(Math.random() * disponiveis.length);
                numeros.push(disponiveis.splice(indice, 1)[0]);
            }
            
            return {
                id: `JS-${Date.now()}-${Math.floor(Math.random() * 1000)}`,
                numeros: numeros.sort((a, b) => a - b),
                preco: 5.00,
                fonte: 'JavaScript'
            };
        }

        function gerarCartelaHTML() {
            // Fun√ß√£o id√™ntica ao cartelas.html
            const numerosUnicos = [];
            const disponiveis = Array.from({length: 75}, (_, i) => i + 1);
            
            for (let j = 0; j < 24; j++) {
                const indice = Math.floor(Math.random() * disponiveis.length);
                numerosUnicos.push(disponiveis.splice(indice, 1)[0]);
            }
            
            return {
                id: `HTML-${Date.now()}-${Math.floor(Math.random() * 1000)}`,
                numeros: numerosUnicos.sort((a, b) => a - b),
                preco: 5.00,
                fonte: 'HTML'
            };
        }

        function validarCartela(cartela) {
            const problemas = [];
            
            // Verificar quantidade
            if (cartela.numeros.length !== 24) {
                problemas.push(`‚ùå Quantidade: ${cartela.numeros.length} (esperado: 24)`);
            }
            
            // Verificar duplicatas
            const unicos = [...new Set(cartela.numeros)];
            if (unicos.length !== cartela.numeros.length) {
                problemas.push(`‚ùå Duplicatas: ${cartela.numeros.length - unicos.length} n√∫meros repetidos`);
            }
            
            // Verificar intervalo
            const min = Math.min(...cartela.numeros);
            const max = Math.max(...cartela.numeros);
            if (min < 1 || max > 75) {
                problemas.push(`‚ùå Intervalo: ${min}-${max} (esperado: 1-75)`);
            }
            
            // Verificar se est√° ordenado
            const ordenados = [...cartela.numeros].sort((a, b) => a - b);
            const estaOrdenado = cartela.numeros.every((num, i) => num === ordenados[i]);
            if (!estaOrdenado) {
                problemas.push(`‚ùå N√£o est√° ordenado`);
            }
            
            return {
                valida: problemas.length === 0,
                problemas: problemas
            };
        }

        function exibirCartela(cartela) {
            const validacao = validarCartela(cartela);
            const container = document.getElementById('container-cartelas');
            
            const cartelaDiv = document.createElement('div');
            cartelaDiv.className = 'cartela-display';
            
            if (!validacao.valida) {
                cartelaDiv.style.borderColor = '#dc3545';
                cartelaDiv.style.backgroundColor = '#fff5f5';
            }
            
            cartelaDiv.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3>${cartela.id} - ${cartela.fonte}</h3>
                    <div style="color: ${validacao.valida ? '#28a745' : '#dc3545'}; font-weight: bold;">
                        ${validacao.valida ? '‚úÖ V√ÅLIDA' : '‚ùå PROBLEMAS ENCONTRADOS'}
                    </div>
                    ${validacao.valida ? '' : `<div style="color: #dc3545; font-size: 0.9em;">${validacao.problemas.join(', ')}</div>`}
                </div>
                
                <!-- Header BINGO -->
                <div class="grid-header">
                    <div class="letra">B</div>
                    <div class="letra">I</div>
                    <div class="letra">N</div>
                    <div class="letra">G</div>
                    <div class="letra">O</div>
                </div>
                
                <!-- Grid de n√∫meros -->
                <div class="grid-numeros">
                    ${cartela.numeros.slice(0, 12).map(num => 
                        `<div class="numero">${num}</div>`
                    ).join('')}
                    <div class="livre">‚≠ê<br>LIVRE</div>
                    ${cartela.numeros.slice(12).map(num => 
                        `<div class="numero">${num}</div>`
                    ).join('')}
                </div>
                
                <div style="text-align: center; margin-top: 20px; font-size: 0.9em; color: #6c757d;">
                    <strong>Detalhes:</strong> ${cartela.numeros.length} n√∫meros | 
                    ${Math.min(...cartela.numeros)}-${Math.max(...cartela.numeros)} | 
                    R$ ${cartela.preco.toFixed(2)}
                </div>
            `;
            
            container.appendChild(cartelaDiv);
            
            // Atualizar estat√≠sticas
            estatisticas.testadas++;
            if (validacao.valida) {
                estatisticas.corretas++;
            } else {
                estatisticas.problemas++;
            }
            
            atualizarEstatisticas();
            
            return validacao.valida;
        }

        function testarFuncaoJS() {
            log('üîß Testando fun√ß√£o do JavaScript...');
            try {
                const cartela = gerarCartelaJS();
                const valida = exibirCartela(cartela);
                log(`${valida ? '‚úÖ' : '‚ùå'} Cartela JS: ${cartela.numeros.length} n√∫meros`);
            } catch (error) {
                log(`‚ùå Erro na fun√ß√£o JS: ${error.message}`);
            }
        }

        function testarFuncaoHTML() {
            log('üìÑ Testando fun√ß√£o do HTML...');
            try {
                const cartela = gerarCartelaHTML();
                const valida = exibirCartela(cartela);
                log(`${valida ? '‚úÖ' : '‚ùå'} Cartela HTML: ${cartela.numeros.length} n√∫meros`);
            } catch (error) {
                log(`‚ùå Erro na fun√ß√£o HTML: ${error.message}`);
            }
        }

        function testarMultiplas() {
            log('üìä Testando 10 cartelas (5 JS + 5 HTML)...');
            
            for (let i = 0; i < 5; i++) {
                setTimeout(() => testarFuncaoJS(), i * 100);
                setTimeout(() => testarFuncaoHTML(), (i * 100) + 50);
            }
            
            setTimeout(() => {
                log(`üìä Teste conclu√≠do: ${estatisticas.corretas}/${estatisticas.testadas} cartelas v√°lidas`);
                
                if (estatisticas.corretas === estatisticas.testadas) {
                    document.body.style.backgroundColor = '#d4edda';
                    log('üéâ SUCESSO TOTAL! Todas as cartelas est√£o corretas!');
                } else {
                    document.body.style.backgroundColor = '#f8d7da';
                    log(`‚ö†Ô∏è ${estatisticas.problemas} cartela(s) com problemas encontrada(s)`);
                }
            }, 1500);
        }

        function limparTudo() {
            document.getElementById('container-cartelas').innerHTML = '';
            document.getElementById('log-testes').innerHTML = 'Sistema limpo...';
            estatisticas = { testadas: 0, corretas: 0, problemas: 0 };
            atualizarEstatisticas();
            document.body.style.backgroundColor = '#f8f9fa';
            log('üóëÔ∏è Sistema limpo e pronto para novos testes');
        }

        // Inicializa√ß√£o
        log('üöÄ Sistema de valida√ß√£o carregado');
        log('‚úÖ Pronto para testar cartelas com 24 n√∫meros √∫nicos');
        atualizarEstatisticas();
    </script>
</body>
</html>
