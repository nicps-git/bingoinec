<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ² Teste Simples - BotÃ£o Sorteio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>ğŸŒ½ Teste Simples - Bingo ArraiÃ¡ INEC ğŸŒ½</h1>
    </header>

    <main>
        <div class="bingo-card">
            <h2>ğŸ¯ NÃºmero Sorteado</h2>
            <div id="numero-sorteado" class="numero-destaque">Clique em Sortear</div>
            <button id="sortear-btn">ğŸ² Sortear</button>
        </div>
        
        <div class="numeros-sorteados">
            <h2>ğŸ“‹ NÃºmeros Anteriores</h2>
            <div class="contador">
                <span id="contador-numeros">0</span> nÃºmeros sorteados
            </div>
            <ul id="numeros-anteriores"></ul>
        </div>
        
        <div style="margin: 20px; padding: 20px; background: #f0f0f0; border-radius: 10px;">
            <h3>ğŸ”§ Testes de Debug:</h3>
            <button onclick="testeDirecto()" style="margin: 5px; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px;">ğŸ§ª Teste Direto</button>
            <button onclick="testeEventListener()" style="margin: 5px; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px;">ğŸ‘‚ Teste Event Listener</button>
            <button onclick="verificarEstado()" style="margin: 5px; padding: 10px; background: #ffc107; color: black; border: none; border-radius: 5px;">ğŸ“Š Verificar Estado</button>
        </div>
    </main>
    
    <div id="fogos" style="display: none;"></div>

    <!-- Firebase SDK v8 Compat -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
    <script src="firebase-service.js"></script>

    <script>
        console.log('ğŸš€ Iniciando teste simplificado...');
        
        // FunÃ§Ã£o de teste direto
        function testeDirecto() {
            console.log('ğŸ§ª Executando teste direto...');
            alert('Teste direto funcionou! O JavaScript estÃ¡ rodando.');
        }
        
        // FunÃ§Ã£o para testar event listener
        function testeEventListener() {
            console.log('ğŸ‘‚ Testando event listener...');
            const botao = document.getElementById('sortear-btn');
            if (botao) {
                console.log('âœ… BotÃ£o encontrado');
                
                // Remover listeners antigos
                const novoBotao = botao.cloneNode(true);
                botao.parentNode.replaceChild(novoBotao, botao);
                
                // Adicionar novo listener
                novoBotao.addEventListener('click', function() {
                    console.log('ğŸ¯ CLICK DETECTADO!');
                    alert('Event listener funcionou!');
                    
                    // Simular sorteio simples
                    const numero = Math.floor(Math.random() * 75) + 1;
                    document.getElementById('numero-sorteado').textContent = numero;
                    
                    const li = document.createElement('li');
                    li.textContent = numero;
                    document.getElementById('numeros-anteriores').appendChild(li);
                    
                    const contador = document.getElementById('contador-numeros');
                    contador.textContent = parseInt(contador.textContent) + 1;
                });
                
                console.log('âœ… Event listener adicionado');
                alert('Event listener adicionado! Agora teste o botÃ£o Sortear.');
            } else {
                console.error('âŒ BotÃ£o nÃ£o encontrado');
                alert('Erro: BotÃ£o nÃ£o encontrado!');
            }
        }
        
        // FunÃ§Ã£o para verificar estado
        function verificarEstado() {
            console.log('ğŸ“Š Verificando estado do sistema...');
            
            const info = {
                botaoExiste: !!document.getElementById('sortear-btn'),
                numeroSorteadoExiste: !!document.getElementById('numero-sorteado'),
                firebaseCarregado: typeof window.firebaseService !== 'undefined',
                bingoGlobalExiste: typeof window.bingoGlobal !== 'undefined',
                sortearNumeroExiste: typeof window.sortearNumero !== 'undefined'
            };
            
            console.log('ğŸ“Š Estado:', info);
            alert(`Estado do Sistema:\n${JSON.stringify(info, null, 2)}`);
        }
        
        // Auto-configurar quando DOM carregar
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('ğŸ“‹ DOM carregado para teste simples');
            
            // Aguardar um pouco para Firebase carregar
            setTimeout(async () => {
                console.log('ğŸ”¥ Verificando Firebase...');
                
                if (typeof window.firebaseService !== 'undefined') {
                    try {
                        const conexao = await firebaseService.verificarConexao();
                        console.log(`ğŸ”¥ Firebase conectado: ${conexao}`);
                    } catch (error) {
                        console.error('âŒ Erro Firebase:', error);
                    }
                }
                
                // Configurar event listener simples se o script principal nÃ£o funcionou
                setTimeout(() => {
                    if (typeof window.bingoGlobal === 'undefined' || !window.bingoGlobal.inicializado) {
                        console.log('âš ï¸ Script principal nÃ£o carregou, configurando fallback...');
                        testeEventListener();
                    } else {
                        console.log('âœ… Script principal carregado corretamente');
                    }
                }, 3000);
                
            }, 2000);
        });
    </script>
    
    <!-- Script principal (carregado por Ãºltimo) -->
    <script src="script.js"></script>
</body>
</html>
