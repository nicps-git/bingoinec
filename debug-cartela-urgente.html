<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debug Cartela - Verifica√ß√£o Urgente</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .btn { background: #e74c3c; color: white; border: none; padding: 15px 25px; margin: 10px; border-radius: 8px; cursor: pointer; }
        .info { background: #ecf0f1; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .cartela-debug { border: 2px solid #e74c3c; padding: 20px; margin: 20px 0; border-radius: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Debug Cartela - Verifica√ß√£o Urgente</h1>
        
        <button onclick="debugGerarCartela()" class="btn">üé≤ Gerar Cartela DEBUG</button>
        <button onclick="limparDebug()" class="btn" style="background: #95a5a6;">üóëÔ∏è Limpar</button>
        
        <div class="info">
            <h3>üìä Status da √öltima Cartela:</h3>
            <p><strong>ID:</strong> <span id="debug-id">-</span></p>
            <p><strong>Quantidade de n√∫meros:</strong> <span id="debug-qtd">-</span></p>
            <p><strong>N√∫meros gerados:</strong> <span id="debug-numeros">-</span></p>
            <p><strong>Timestamp:</strong> <span id="debug-time">-</span></p>
        </div>
        
        <div id="cartela-container">
            <!-- Cartela ser√° exibida aqui -->
        </div>
        
        <div class="info">
            <h3>üìù Log de Debug:</h3>
            <div id="debug-log" style="background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; font-family: monospace; height: 200px; overflow-y: auto;">
                Aguardando debug...
            </div>
        </div>
    </div>

    <script>
        function log(msg) {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<br>[${timestamp}] ${msg}`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[DEBUG] ${msg}`);
        }

        function debugGerarCartela() {
            log('üöÄ Iniciando gera√ß√£o de cartela DEBUG...');
            
            try {
                // Gerar cartela id√™ntica ao c√≥digo original
                const numeros = [];
                const numeroInicial = 1;
                const numeroFinal = 75;
                
                // Criar array de n√∫meros dispon√≠veis
                const disponiveis = [];
                for (let i = numeroInicial; i <= numeroFinal; i++) {
                    disponiveis.push(i);
                }
                
                log(`üìã Array dispon√≠vel criado: ${disponiveis.length} n√∫meros (1-75)`);
                
                // Escolher 24 n√∫meros aleat√≥rios
                for (let i = 0; i < 24; i++) {
                    const indice = Math.floor(Math.random() * disponiveis.length);
                    numeros.push(disponiveis.splice(indice, 1)[0]);
                }
                
                log(`üé≤ ${numeros.length} n√∫meros selecionados ANTES da ordena√ß√£o`);
                
                // Ordenar n√∫meros
                numeros.sort((a, b) => a - b);
                
                // Criar objeto da cartela
                const cartela = {
                    id: `DEBUG-${Date.now()}-${Math.floor(Math.random() * 1000)}`,
                    numeros: numeros,
                    preco: 5.00,
                    status: 'debug'
                };
                
                log(`‚úÖ Cartela criada: ${cartela.id}`);
                log(`üìä Total de n√∫meros: ${cartela.numeros.length}`);
                log(`üî¢ N√∫meros: ${cartela.numeros.join(', ')}`);
                
                // Atualizar info
                document.getElementById('debug-id').textContent = cartela.id;
                document.getElementById('debug-qtd').textContent = cartela.numeros.length;
                document.getElementById('debug-numeros').textContent = cartela.numeros.join(', ');
                document.getElementById('debug-time').textContent = new Date().toLocaleString();
                
                // Exibir cartela
                exibirCartelaDebug(cartela);
                
            } catch (error) {
                log(`‚ùå ERRO: ${error.message}`);
                console.error('Erro completo:', error);
            }
        }

        function exibirCartelaDebug(cartela) {
            log('üñºÔ∏è Exibindo cartela na interface...');
            
            const container = document.getElementById('cartela-container');
            
            // Verificar se tem 24 n√∫meros
            if (cartela.numeros.length !== 24) {
                log(`‚ùå PROBLEMA: Cartela tem ${cartela.numeros.length} n√∫meros em vez de 24!`);
            } else {
                log(`‚úÖ Cartela tem exatamente 24 n√∫meros`);
            }
            
            container.innerHTML = `
                <div class="cartela-debug">
                    <h3 style="text-align: center; margin: 0 0 15px 0;">
                        üé´ ${cartela.id} 
                        <span style="color: ${cartela.numeros.length === 24 ? '#27ae60' : '#e74c3c'};">
                            (${cartela.numeros.length} n√∫meros)
                        </span>
                    </h3>
                    
                    <!-- Header BINGO -->
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 3px; margin: 10px 0;">
                        <div style="background: #e74c3c; color: white; text-align: center; font-size: 1.2em; font-weight: bold; padding: 8px; border-radius: 5px;">B</div>
                        <div style="background: #e74c3c; color: white; text-align: center; font-size: 1.2em; font-weight: bold; padding: 8px; border-radius: 5px;">I</div>
                        <div style="background: #e74c3c; color: white; text-align: center; font-size: 1.2em; font-weight: bold; padding: 8px; border-radius: 5px;">N</div>
                        <div style="background: #e74c3c; color: white; text-align: center; font-size: 1.2em; font-weight: bold; padding: 8px; border-radius: 5px;">G</div>
                        <div style="background: #e74c3c; color: white; text-align: center; font-size: 1.2em; font-weight: bold; padding: 8px; border-radius: 5px;">O</div>
                    </div>
                    
                    <!-- Grid de n√∫meros (5x5 com espa√ßo livre central) -->
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 3px; margin: 15px 0;">
                        ${cartela.numeros.slice(0, 12).map((num, index) => 
                            `<div style="background: #4CAF50; color: white; padding: 12px; text-align: center; border-radius: 5px; font-weight: bold; font-size: 16px;" title="Posi√ß√£o ${index + 1}">${num}</div>`
                        ).join('')}
                        <div style="background: #f39c12; color: white; padding: 12px; text-align: center; border-radius: 5px; font-weight: bold; font-size: 14px;" title="Espa√ßo Livre">‚≠ê<br>LIVRE</div>
                        ${cartela.numeros.slice(12).map((num, index) => 
                            `<div style="background: #4CAF50; color: white; padding: 12px; text-align: center; border-radius: 5px; font-weight: bold; font-size: 16px;" title="Posi√ß√£o ${index + 13}">${num}</div>`
                        ).join('')}
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px;">
                        <strong>üí∞ R$ ${cartela.preco.toFixed(2)}</strong> | 
                        <strong>üéØ ${cartela.numeros.length} n√∫meros</strong> |
                        <strong>üî¢ ${Math.min(...cartela.numeros)} - ${Math.max(...cartela.numeros)}</strong>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 12px;">
                        <strong>Debug Info:</strong><br>
                        Primeiros 12: ${cartela.numeros.slice(0, 12).join(', ')}<br>
                        √öltimos 12: ${cartela.numeros.slice(12).join(', ')}
                    </div>
                </div>
            `;
            
            log(`‚úÖ Cartela exibida - ${cartela.numeros.slice(0, 12).length} + LIVRE + ${cartela.numeros.slice(12).length} = ${cartela.numeros.slice(0, 12).length + 1 + cartela.numeros.slice(12).length} elementos`);
        }

        function limparDebug() {
            document.getElementById('cartela-container').innerHTML = '';
            document.getElementById('debug-log').innerHTML = 'Debug limpo...';
            document.getElementById('debug-id').textContent = '-';
            document.getElementById('debug-qtd').textContent = '-';
            document.getElementById('debug-numeros').textContent = '-';
            document.getElementById('debug-time').textContent = '-';
            log('üóëÔ∏è Debug limpo');
        }

        // Inicializar
        log('üöÄ Sistema de debug carregado');
        log('‚ö° Clique em "Gerar Cartela DEBUG" para testar');
    </script>
</body>
</html>
