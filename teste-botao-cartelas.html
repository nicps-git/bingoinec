<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Teste BotÃ£o Admin - Cartelas</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 30px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        .teste-btn { background: linear-gradient(45deg, #28a745, #20c997); color: white; padding: 15px 30px; border: none; border-radius: 8px; margin: 10px; cursor: pointer; font-size: 16px; font-weight: bold; }
        .teste-btn:hover { transform: translateY(-2px); }
        .info { background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #17a2b8; }
        .sucesso { background: #d4edda; border-left-color: #28a745; }
        .erro { background: #f8d7da; border-left-color: #dc3545; }
        .debug { background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Teste do BotÃ£o Admin - PÃ¡gina Cartelas</h1>
        
        <div class="info">
            <h3>ğŸ“‹ Status do Sistema:</h3>
            <div id="status-sistema">Carregando...</div>
        </div>
        
        <div class="info">
            <h3>ğŸ”˜ BotÃ£o de Teste:</h3>
            <p>Este Ã© o mesmo botÃ£o que estÃ¡ na pÃ¡gina cartelas.html:</p>
            <button onclick="verificarAcessoAdmin()" class="teste-btn">âš™ï¸ Admin</button>
        </div>
        
        <div class="info">
            <h3>ğŸ¯ Comportamento Esperado:</h3>
            <ul>
                <li><strong>Se nÃ£o logado:</strong> Pergunta se quer ir para login</li>
                <li><strong>Se jÃ¡ logado:</strong> Vai direto para admin.html</li>
            </ul>
        </div>
        
        <div class="info">
            <h3>ğŸ”§ Debug TÃ©cnico:</h3>
            <div id="debug-info" class="debug">Carregando informaÃ§Ãµes...</div>
        </div>
        
        <div class="info">
            <h3>ğŸš€ Outros Testes:</h3>
            <button onclick="testarFuncaoExiste()" class="teste-btn">ğŸ” Verificar se FunÃ§Ã£o Existe</button>
            <button onclick="testarWindowBingoAuth()" class="teste-btn">ğŸªŸ Verificar window.bingoAuth</button>
            <button onclick="irParaCartelas()" class="teste-btn">ğŸ« Ir para Cartelas Real</button>
        </div>
        
        <div id="resultado" style="display: none;" class="info">
            <h3>ğŸ“‹ Resultado do Teste:</h3>
            <div id="resultado-conteudo"></div>
        </div>
    </div>

    <!-- Mesmos scripts da pÃ¡gina cartelas -->
    <script src="login.js"></script>
    <script src="cartelas.js"></script>
    
    <script>
        function atualizarStatus() {
            const statusDiv = document.getElementById('status-sistema');
            const debugDiv = document.getElementById('debug-info');
            
            let statusHtml = '';
            let debugHtml = '';
            
            // Verificar se funÃ§Ã£o existe
            const funcaoExiste = typeof verificarAcessoAdmin === 'function';
            statusHtml += `ğŸ”§ FunÃ§Ã£o verificarAcessoAdmin: ${funcaoExiste ? '<span style="color: green;">âœ… Existe</span>' : '<span style="color: red;">âŒ NÃ£o existe</span>'}<br>`;
            
            // Verificar window.bingoAuth
            const authExiste = !!window.bingoAuth;
            statusHtml += `ğŸ” window.bingoAuth: ${authExiste ? '<span style="color: green;">âœ… Carregado</span>' : '<span style="color: red;">âŒ NÃ£o carregado</span>'}<br>`;
            
            if (authExiste) {
                try {
                    const isAuth = window.bingoAuth.isAuthenticated();
                    statusHtml += `ğŸ‘¤ Status de login: ${isAuth ? '<span style="color: green;">âœ… Logado</span>' : '<span style="color: orange;">âš ï¸ NÃ£o logado</span>'}<br>`;
                } catch (e) {
                    statusHtml += `ğŸ‘¤ Status de login: <span style="color: red;">âŒ Erro: ${e.message}</span><br>`;
                }
            }
            
            // Debug tÃ©cnico
            debugHtml += `typeof verificarAcessoAdmin: ${typeof verificarAcessoAdmin}\n`;
            debugHtml += `window.bingoAuth exists: ${!!window.bingoAuth}\n`;
            debugHtml += `Scripts carregados: login.js + cartelas.js\n`;
            debugHtml += `PÃ¡gina atual: ${window.location.pathname}\n`;
            debugHtml += `User Agent: ${navigator.userAgent.substring(0, 50)}...\n`;
            
            statusDiv.innerHTML = statusHtml;
            debugDiv.textContent = debugHtml;
        }
        
        function testarFuncaoExiste() {
            mostrarResultado(
                typeof verificarAcessoAdmin === 'function' ? 
                'âœ… FunÃ§Ã£o verificarAcessoAdmin existe e estÃ¡ acessÃ­vel!' : 
                'âŒ FunÃ§Ã£o verificarAcessoAdmin NÃƒO foi encontrada!'
            );
        }
        
        function testarWindowBingoAuth() {
            let resultado = '';
            if (window.bingoAuth) {
                resultado += 'âœ… window.bingoAuth existe\n';
                try {
                    const isAuth = window.bingoAuth.isAuthenticated();
                    resultado += `âœ… isAuthenticated() retornou: ${isAuth}\n`;
                } catch (e) {
                    resultado += `âŒ Erro ao chamar isAuthenticated(): ${e.message}\n`;
                }
            } else {
                resultado += 'âŒ window.bingoAuth nÃ£o existe\n';
            }
            mostrarResultado(resultado);
        }
        
        function irParaCartelas() {
            window.location.href = 'cartelas.html';
        }
        
        function mostrarResultado(conteudo) {
            const resultado = document.getElementById('resultado');
            const conteudoDiv = document.getElementById('resultado-conteudo');
            conteudoDiv.innerHTML = conteudo.replace(/\n/g, '<br>');
            resultado.style.display = 'block';
            
            setTimeout(() => {
                resultado.style.display = 'none';
            }, 8000);
        }
        
        // Atualizar status quando carregar
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(atualizarStatus, 500);
        });
    </script>
</body>
</html>
